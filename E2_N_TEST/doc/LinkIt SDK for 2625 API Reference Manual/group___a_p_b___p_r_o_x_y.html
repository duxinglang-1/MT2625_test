<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MT2625 API Reference: APB_PROXY</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MT2625 API Reference
   &#160;<span id="projectnumber">LinkIt SDK v4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___a_p_b___p_r_o_x_y.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">APB_PROXY</div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes the AP Bridge Proxy APIs.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section describes the AP Bridge Proxy APIs. </p>
<p>User can register some customized AT commands into AP Bridge proxy. When external AP or PC tool sends the registered AT commands, AP Bridge proxy will forward the AT command request to the registered command handler by callback function. After user executes the AT command, the AT command results can be sent to external AP or PC tool by calling AP Bridge Proxy's APIs. There are command mode and data mode for AT command. By default, it is always in command mode. If the user wants to transfer lots of binary data, data transfer has better performance in data mode. When in data mode, the data will not go through ATCI module shown in AP Bridge Architecture diagram. If the At command's result is CONNECT, user can begin to set up data mode. Please note: only one channel can go to data mode at the same time.</p>
<h1>Terms and Acronyms </h1>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>APB/apb</b> </td><td>AP bridge (APB) is used to connect the command and user data between application and modem domains. </td></tr>
<tr>
<td><b>MUX</b> </td><td>Multiplexer (MUX) represents the adaption layer between application and modem over cross side communication interface, not 3GPP TS 27.010 protocol. </td></tr>
<tr>
<td><b>CME</b> </td><td>Cellular mobile equipment. </td></tr>
<tr>
<td><b>PLMN</b> </td><td>Public land mobile network. </td></tr>
<tr>
<td><b>PDP</b> </td><td>Packet data protocol. </td></tr>
<tr>
<td><b>PSD</b> </td><td>Packet switched data. </td></tr>
</table>
<h1><a class="anchor" id="apb_proxy_architecture"></a>
AP Bridge Architecture</h1>
<ul>
<li><b> The APB architecture in command mode is shown below: </b> <div class="image">
<img src="apb_proxy_architecture_command_mode.png" alt="apb_proxy_architecture_command_mode.png"/>
</div>
</li>
<li><b> The APB architecture in data mode is shown below: </b> <div class="image">
<img src="apb_proxy_architecture_data_mode.png" alt="apb_proxy_architecture_data_mode.png"/>
</div>
</li>
</ul>
<h1><a class="anchor" id="apb_proxy_apis"></a>
How to use this module</h1>
<ul>
<li><b>How to process an AT command request </b><ul>
<li>Step 1. Write a command handler <div class="fragment"><div class="line"><a class="code" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_example_at_command_handler(<a class="code" href="structapb__proxy__parse__cmd__param__t.html">apb_proxy_parse_cmd_param_t</a> *p_parse_cmd)</div><div class="line">{</div><div class="line">    configASSERT(p_parse_cmd != NULL);</div><div class="line">    <a class="code" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> cmd_result;</div><div class="line">    <span class="comment">// Please note, if the output result is short, stack buffer is also supported.</span></div><div class="line">    uint8_t* p_out_buffer = NULL;</div><div class="line">    <span class="comment">// Initialize cmd_result.</span></div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a29760dabfeaf2dc888c45a9c9eff533d">APB_PROXY_RESULT_OK</a>;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a> = NULL;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = 0;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a> = p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a>;</div><div class="line">    <span class="keywordflow">switch</span> (p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a97588cf0750ff09001e332dc85f8b4b4">mode</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da3c5bdd88b98ab756e6cfd3c427d82da1">APB_PROXY_CMD_MODE_READ</a>: {</div><div class="line">            p_out_buffer = (uint8_t *)pvPortMalloc(buffer_size);</div><div class="line">            memset(p_out_buffer, 0, buffer_size);</div><div class="line">            <span class="comment">// Do something. Put the custom output data into p_out_buffer.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da4a80492d39881ae6d9df6d441912b8fa">APB_PROXY_CMD_MODE_ACTIVE</a>: {</div><div class="line">            p_out_buffer = (uint8_t *)pvPortMalloc(buffer_size);</div><div class="line">            memset(p_out_buffer, 0, buffer_size);</div><div class="line">            <span class="comment">// Do something. Put the custom output data into p_out_buffer.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da4e79862a919e76a3bc485fb210e200f4">APB_PROXY_CMD_MODE_EXECUTION</a>: {</div><div class="line">            p_out_buffer = (uint8_t *)pvPortMalloc(buffer_size);</div><div class="line">            memset(p_out_buffer, 0, buffer_size);</div><div class="line">            <span class="comment">// Do something. Put the custom output data into p_out_buffer.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da59cd1bc0d96aad427d8ef1b88d511993">APB_PROXY_CMD_MODE_TESTING</a>: {</div><div class="line">            p_out_buffer = (uint8_t *)pvPortMalloc(buffer_size);</div><div class="line">            memset(p_out_buffer, 0, buffer_size);</div><div class="line">            <span class="comment">// Do something. Put the custom output data into p_out_buffer.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da88e261b39a2596252db1b7afe33b2688">APB_PROXY_CMD_MODE_INVALID</a>: {</div><div class="line">            p_out_buffer = (uint8_t *)pvPortMalloc(buffer_size);</div><div class="line">            memset(p_out_buffer, 0, buffer_size);</div><div class="line">            <span class="comment">// Do something. Put the custom output data into p_out_buffer.</span></div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a6b01b1e3690eb2206d56f589c0796f04">APB_PROXY_RESULT_ERROR</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>: {</div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a6b01b1e3690eb2206d56f589c0796f04">APB_PROXY_RESULT_ERROR</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a29760dabfeaf2dc888c45a9c9eff533d">APB_PROXY_RESULT_OK</a>;</div><div class="line">    <span class="keywordflow">if</span> (p_out_buffer != NULL){</div><div class="line">        cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a> = p_out_buffer;</div><div class="line">        cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = strlen(cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a>);</div><div class="line">    }</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a> = p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a>;</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023">apb_proxy_send_at_cmd_result</a>(&amp;cmd_result) == <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008">APB_PROXY_STATUS_ERROR</a>){</div><div class="line">        <span class="comment">// Failed to send the AT command result.</span></div><div class="line">    }</div><div class="line">    <span class="comment">// Free the allocated buffer.</span></div><div class="line">    <span class="keywordflow">if</span> (p_out_buffer != NULL){</div><div class="line">        vPortFree((<span class="keywordtype">void</span> *)p_out_buffer);</div><div class="line">        p_out_buffer = NULL;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Send an unsolicited message.</span></div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a3258b5e396365cadd638495169b3c1b9">APB_PROXY_RESULT_UNSOLICITED</a>;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a> = <span class="stringliteral">&quot;AP Bridge Proxy URC Test&quot;</span>;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = strlen(cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a>);</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a> = p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a>;</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023">apb_proxy_send_at_cmd_result</a>(&amp;cmd_result) == <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008">APB_PROXY_STATUS_ERROR</a>){</div><div class="line">        <span class="comment">// Failed to send the AT command result.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a">APB_PROXY_STATUS_OK</a>;</div><div class="line">}</div></div><!-- fragment --></li>
<li>Step 2. Add the AT command definition into command table in "apb_proxy_at_cmd_tbl.c". <div class="fragment"><div class="line"><a class="code" href="group__apb__proxy__define.html#ga41d3cd7776a6d8b069d6aa3b0f5314ca">AT_CMD_HDLR_ITEM_ENTRY_DEF</a>(<span class="stringliteral">&quot;AT+EXAMPLE&quot;</span>, apb_proxy_example_at_command_handler)</div></div><!-- fragment --></li>
</ul>
</li>
<li><b>How to create data mode and transfer binary data</b><ul>
<li>Step 1. Write a command handler <div class="fragment"><div class="line"><a class="code" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_example2_at_command_handler(<a class="code" href="structapb__proxy__parse__cmd__param__t.html">apb_proxy_parse_cmd_param_t</a> *p_parse_cmd)</div><div class="line">{</div><div class="line">    configASSERT(p_parse_cmd != NULL);</div><div class="line">    <a class="code" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> cmd_result;</div><div class="line">    <span class="comment">// Initialize cmd_result.</span></div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a29760dabfeaf2dc888c45a9c9eff533d">APB_PROXY_RESULT_OK</a>;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a> = NULL;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = 0;</div><div class="line">    cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a> = p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a>;</div><div class="line">    <span class="keywordflow">switch</span> (p_parse_cmd-&gt;<a class="code" href="structapb__proxy__parse__cmd__param__t.html#a97588cf0750ff09001e332dc85f8b4b4">mode</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da3c5bdd88b98ab756e6cfd3c427d82da1">APB_PROXY_CMD_MODE_READ</a>: {</div><div class="line">            <span class="comment">// Do something.</span></div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5acafa20ddd04588f2b03517873201a29c">APB_PROXY_RESULT_CONNECT</a>; <span class="comment">// Go to data mode.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da4a80492d39881ae6d9df6d441912b8fa">APB_PROXY_CMD_MODE_ACTIVE</a>: {</div><div class="line">            <span class="comment">// Do something.</span></div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5acafa20ddd04588f2b03517873201a29c">APB_PROXY_RESULT_CONNECT</a>; <span class="comment">// Go to data mode.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da4e79862a919e76a3bc485fb210e200f4">APB_PROXY_CMD_MODE_EXECUTION</a>: {</div><div class="line">            <span class="comment">// Do something.</span></div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5acafa20ddd04588f2b03517873201a29c">APB_PROXY_RESULT_CONNECT</a>; <span class="comment">// Go to data mode.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da59cd1bc0d96aad427d8ef1b88d511993">APB_PROXY_CMD_MODE_TESTING</a>: {</div><div class="line">            <span class="comment">// Do something.</span></div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5acafa20ddd04588f2b03517873201a29c">APB_PROXY_RESULT_CONNECT</a>; <span class="comment">// Go to data mode.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga6c476440543bd066a11f6780726ddd4da88e261b39a2596252db1b7afe33b2688">APB_PROXY_CMD_MODE_INVALID</a>: {</div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a6b01b1e3690eb2206d56f589c0796f04">APB_PROXY_RESULT_ERROR</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>: {</div><div class="line">            cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a6b01b1e3690eb2206d56f589c0796f04">APB_PROXY_RESULT_ERROR</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023">apb_proxy_send_at_cmd_result</a>(&amp;cmd_result) == <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008">APB_PROXY_STATUS_ERROR</a>){</div><div class="line">        <span class="comment">// Failed to send the AT command result.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a">APB_PROXY_STATUS_OK</a>;</div><div class="line">}</div></div><!-- fragment --></li>
<li>Step 2. Add the AT command definition into command table in "apb_proxy_at_cmd_tbl.c". <div class="fragment"><div class="line"><a class="code" href="group__apb__proxy__define.html#ga41d3cd7776a6d8b069d6aa3b0f5314ca">AT_CMD_HDLR_ITEM_ENTRY_DEF</a>(<span class="stringliteral">&quot;AT+EXAMPLE2&quot;</span>, apb_proxy_example2_at_command_handler)</div></div><!-- fragment --></li>
<li>Step 3. Write a data mode event callback. <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_data_mode_event_call_back(<a class="code" href="group__apb__proxy__enum.html#ga32084567ef58fb1e95675f8548a91d3a">apb_proxy_event_type_t</a> event, <span class="keywordtype">void</span> *pdata)</div><div class="line">{</div><div class="line">    <a class="code" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> cmd_result;</div><div class="line">    <span class="keywordflow">switch</span> (event) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga32084567ef58fb1e95675f8548a91d3aacab16f9a5acde87386fbb10a992d88ab">APB_PROXY_USER_DATA_IND</a>: {</div><div class="line">            <span class="comment">// Process user data sent from an external AP.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga32084567ef58fb1e95675f8548a91d3aa8bb6262b5ed32ddaef324f2570055c40">APB_PROXY_STOP_SEND_USER_DATA</a>: {</div><div class="line">            <span class="comment">// Flow control event: stop sending more data to the APB proxy.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__apb__proxy__enum.html#gga32084567ef58fb1e95675f8548a91d3aa8413444071ef5a9439e66967bd46597a">APB_PROXY_RESUME_SEND_USER_DATA</a>: {</div><div class="line">            <span class="comment">// Flow control event: resume sending data to the APB proxy.</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>: {</div><div class="line">            configASSERT(0);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></li>
<li>Step 4. Switch data mode, transfer user data, close data mode. <div class="fragment"><div class="line"><a class="code" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id = 0;</div><div class="line">conn_id = <a class="code" href="group___a_p_b___p_r_o_x_y.html#ga7310c2f79c510d6d0f660ceb8ce370fc">apb_proxy_create_data_mode</a>(app_data_mode_event_call_back, cmd_id);</div><div class="line"><span class="keywordflow">if</span> (conn_id == 0){</div><div class="line">   <span class="comment">// Data mode creation has failed.</span></div><div class="line">}</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga3e7b16901441f733f3304a503cd0a97c">apb_proxy_send_user_data</a>(conn_id, pdata) != <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a">APB_PROXY_STATUS_OK</a>){</div><div class="line">   <span class="comment">// Sending user data has failed.</span></div><div class="line">}</div><div class="line"><span class="comment">// Close the data mode and return to the command mode.</span></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga193df54a1225f5be9ed791b723d6f0e5">apb_proxy_close_data_mode</a>(conn_id) != <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a">APB_PROXY_STATUS_OK</a>){</div><div class="line">   <span class="comment">// Closing data mode has failed.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Send the final result for this command.</span></div><div class="line"><a class="code" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> cmd_result;</div><div class="line">cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aaa52673fbf3e58868ce9b6a6dc1193f7">result_code</a> = <a class="code" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a2d8da4fdb0b0bf6fcfaef2752981fa57">APB_PROXY_RESULT_NO_CARRIER</a>;</div><div class="line">cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#ac1813db8c1b9a97ddddf6a2568a6b524">pdata</a> = NULL;</div><div class="line">cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#aebb70c2aab3407a9f05334c47131a43b">length</a> = 0;</div><div class="line">cmd_result.<a class="code" href="structapb__proxy__at__cmd__result__t.html#a2ce570440a0a48a4204595688cc9a357">cmd_id</a> = cmd_id;</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023">apb_proxy_send_at_cmd_result</a>(&amp;cmd_result) == <a class="code" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a">APB_PROXY_STATUS_OK</a>){</div><div class="line">    <span class="comment">// Send the final result for this command completed successfully.</span></div><div class="line">}<span class="keywordflow">else</span>{</div><div class="line">    <span class="comment">// Failed to send the command&#39;s final result.</span></div><div class="line">}</div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga581209a49dc11a2ed63419b3a4bd0023"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023">apb_proxy_send_at_cmd_result</a> (<a class="el" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> *presult)</td></tr>
<tr class="memdesc:ga581209a49dc11a2ed63419b3a4bd0023"><td class="mdescLeft">&#160;</td><td class="mdescRight">The APP calls this function to send an AT command result to the APB proxy.  <a href="#ga581209a49dc11a2ed63419b3a4bd0023">More...</a><br /></td></tr>
<tr class="separator:ga581209a49dc11a2ed63419b3a4bd0023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7310c2f79c510d6d0f660ceb8ce370fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga7310c2f79c510d6d0f660ceb8ce370fc">apb_proxy_create_data_mode</a> (<a class="el" href="group__apb__proxy__typedef.html#gad1c954adcb77fd29dc1383bb3ebbc3d8">apb_proxy_data_mode_event_callback_t</a> call_back, <a class="el" href="group__apb__proxy__typedef.html#ga855cd21d2eeb3fd52bb1218904fabeaf">apb_proxy_cmd_id_t</a> cmd_id)</td></tr>
<tr class="memdesc:ga7310c2f79c510d6d0f660ceb8ce370fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the AT command's result is "CONNECT", the APP requests APB proxy to set up data connection (data mode) to transfer user data or binary data.  <a href="#ga7310c2f79c510d6d0f660ceb8ce370fc">More...</a><br /></td></tr>
<tr class="separator:ga7310c2f79c510d6d0f660ceb8ce370fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga193df54a1225f5be9ed791b723d6f0e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga193df54a1225f5be9ed791b723d6f0e5">apb_proxy_close_data_mode</a> (<a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id)</td></tr>
<tr class="memdesc:ga193df54a1225f5be9ed791b723d6f0e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function closes the data mode connection.  <a href="#ga193df54a1225f5be9ed791b723d6f0e5">More...</a><br /></td></tr>
<tr class="separator:ga193df54a1225f5be9ed791b723d6f0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e7b16901441f733f3304a503cd0a97c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga3e7b16901441f733f3304a503cd0a97c">apb_proxy_send_user_data</a> (<a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id, <a class="el" href="structapb__proxy__user__data__t.html">apb_proxy_user_data_t</a> *puser_data)</td></tr>
<tr class="memdesc:ga3e7b16901441f733f3304a503cd0a97c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The APP calls this function to send user data to the APB proxy.  <a href="#ga3e7b16901441f733f3304a503cd0a97c">More...</a><br /></td></tr>
<tr class="separator:ga3e7b16901441f733f3304a503cd0a97c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c506dafd93c2179c3b179938046f160"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga3c506dafd93c2179c3b179938046f160">apb_proxy_stop_send_user_data</a> (<a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id)</td></tr>
<tr class="memdesc:ga3c506dafd93c2179c3b179938046f160"><td class="mdescLeft">&#160;</td><td class="mdescRight">The APP requests APB proxy to stop sending user data for flow control.  <a href="#ga3c506dafd93c2179c3b179938046f160">More...</a><br /></td></tr>
<tr class="separator:ga3c506dafd93c2179c3b179938046f160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28aa656067ceae8cc22f9882532f7926"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga28aa656067ceae8cc22f9882532f7926">apb_proxy_resume_send_user_data</a> (<a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id)</td></tr>
<tr class="memdesc:ga28aa656067ceae8cc22f9882532f7926"><td class="mdescLeft">&#160;</td><td class="mdescRight">The APP requests APB to resume sending user data.  <a href="#ga28aa656067ceae8cc22f9882532f7926">More...</a><br /></td></tr>
<tr class="separator:ga28aa656067ceae8cc22f9882532f7926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga754cfba679b25c7b041f567e8ba145dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga754cfba679b25c7b041f567e8ba145dd">apb_proxy_current_channel_data_mode_actived</a> (uint32_t apb_id)</td></tr>
<tr class="memdesc:ga754cfba679b25c7b041f567e8ba145dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chech whether the current channel is in data mode state.  <a href="#ga754cfba679b25c7b041f567e8ba145dd">More...</a><br /></td></tr>
<tr class="separator:ga754cfba679b25c7b041f567e8ba145dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34d6ec3a7cbaad461baa17bdb8fcc2af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_b___p_r_o_x_y.html#ga34d6ec3a7cbaad461baa17bdb8fcc2af">apb_proxy_resume_data_mode</a> (<a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> conn_id)</td></tr>
<tr class="memdesc:ga34d6ec3a7cbaad461baa17bdb8fcc2af"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the current data mode has been switched to command mode temperarily, the data mode can be switched back by calling this function.  <a href="#ga34d6ec3a7cbaad461baa17bdb8fcc2af">More...</a><br /></td></tr>
<tr class="separator:ga34d6ec3a7cbaad461baa17bdb8fcc2af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__apb__proxy__define"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apb__proxy__define.html">Define</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__apb__proxy__enum"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apb__proxy__enum.html">Enumerations</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__apb__proxy__struct"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apb__proxy__struct.html">Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__apb__proxy__typedef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apb__proxy__typedef.html">Typedef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga193df54a1225f5be9ed791b723d6f0e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_close_data_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td>
          <td class="paramname"><em>conn_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function closes the data mode connection. </p>
<p>The APP must call <a class="el" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023" title="The APP calls this function to send an AT command result to the APB proxy. ">apb_proxy_send_at_cmd_result()</a> to send the final result (<a class="el" href="group__apb__proxy__enum.html#gga83108f71bcd772d4f1d8e7d1589d9df5a2d8da4fdb0b0bf6fcfaef2752981fa57" title="NO CARRIER (Data connection ended or setup has failed.) ">APB_PROXY_RESULT_NO_CARRIER</a>) of the AT command to close data mode connection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_id</td><td>Please refer to <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, the cause would be: connection ID is not valid, data mode is not active, or message queue is full. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7310c2f79c510d6d0f660ceb8ce370fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a> apb_proxy_create_data_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#gad1c954adcb77fd29dc1383bb3ebbc3d8">apb_proxy_data_mode_event_callback_t</a>&#160;</td>
          <td class="paramname"><em>call_back</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga855cd21d2eeb3fd52bb1218904fabeaf">apb_proxy_cmd_id_t</a>&#160;</td>
          <td class="paramname"><em>cmd_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the AT command's result is "CONNECT", the APP requests APB proxy to set up data connection (data mode) to transfer user data or binary data. </p>
<p>Before calling this function, APP must call <a class="el" href="group___a_p_b___p_r_o_x_y.html#ga581209a49dc11a2ed63419b3a4bd0023" title="The APP calls this function to send an AT command result to the APB proxy. ">apb_proxy_send_at_cmd_result()</a> to send the command result "CONNECT". </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">call_back</td><td>APB proxy will use the callback to inform data mode related events. Please refer to <a class="el" href="group__apb__proxy__enum.html#ga32084567ef58fb1e95675f8548a91d3a" title="This enumeration defines APB event type for data mode. ">apb_proxy_event_type_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd_id</td><td>AT command to set to data mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If data connection is successfully created, return a non-zero value. If data connection failed to be created, return 0. </dd></dl>

</div>
</div>
<a class="anchor" id="ga754cfba679b25c7b041f567e8ba145dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool apb_proxy_current_channel_data_mode_actived </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>apb_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chech whether the current channel is in data mode state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">apb_id</td><td>The id can be <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a> or # apb_proxy_cmd_id_t. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is true, the current channel is in data mode state. If the result is false, the current channel is not in data mode state. </dd></dl>

</div>
</div>
<a class="anchor" id="ga34d6ec3a7cbaad461baa17bdb8fcc2af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_resume_data_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td>
          <td class="paramname"><em>conn_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the current data mode has been switched to command mode temperarily, the data mode can be switched back by calling this function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_id</td><td>Please refer to <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a" title="The operation completed successfully. ">APB_PROXY_STATUS_OK</a>, data mode is switched successfully. If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, failed to switch to data mode. </dd></dl>

</div>
</div>
<a class="anchor" id="ga28aa656067ceae8cc22f9882532f7926"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_resume_send_user_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td>
          <td class="paramname"><em>conn_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The APP requests APB to resume sending user data. </p>
<p>Call this function to process more user data in the APP. This is a none-blocking function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_id</td><td>Please refer to <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a" title="The operation completed successfully. ">APB_PROXY_STATUS_OK</a>, APB proxy will guarantee to send the data out. If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, the cause would be: connection is not valid, data mode is not active, or message queue is full. </dd></dl>

</div>
</div>
<a class="anchor" id="ga581209a49dc11a2ed63419b3a4bd0023"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_send_at_cmd_result </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapb__proxy__at__cmd__result__t.html">apb_proxy_at_cmd_result_t</a> *&#160;</td>
          <td class="paramname"><em>presult</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The APP calls this function to send an AT command result to the APB proxy. </p>
<p>This is a none-blocking function. This function can be used for multi-tasking. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">presult</td><td>A pointer to the AT command result structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a" title="The operation completed successfully. ">APB_PROXY_STATUS_OK</a>, the APB will guarantee the data is sent out successfully. If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, there are four causes for the error. (1) not enough heap memory, (2) more than one command try to switch to data mode, (3) before closing the data mode, it tried to send command result, (4) invalid command ID. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3e7b16901441f733f3304a503cd0a97c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_send_user_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td>
          <td class="paramname"><em>conn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapb__proxy__user__data__t.html">apb_proxy_user_data_t</a> *&#160;</td>
          <td class="paramname"><em>puser_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The APP calls this function to send user data to the APB proxy. </p>
<p>This is a none-blocking function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_id</td><td>Please refer to <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">puser_data</td><td>A pointer to the user data structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a" title="The operation completed successfully. ">APB_PROXY_STATUS_OK</a>, APB proxy will guarantee to send the data out. If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, the cause would be: connection is not valid, data mode is not active, or message queue is full. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3c506dafd93c2179c3b179938046f160"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apb__proxy__enum.html#gae7f44c25eb64b7837c5b7877c3e42a3d">apb_proxy_status_t</a> apb_proxy_stop_send_user_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c">apb_proxy_data_conn_id_t</a>&#160;</td>
          <td class="paramname"><em>conn_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The APP requests APB proxy to stop sending user data for flow control. </p>
<p>Call this function, if the APP cannot process more user data. This is a non-blocking function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_id</td><td>Please refer to <a class="el" href="group__apb__proxy__typedef.html#ga7c4f25d014ef676b51b9e154255ea65c" title="Data connection identifier. ">apb_proxy_data_conn_id_t</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3dab0a01d33eb27d17870a0c06e178f201a" title="The operation completed successfully. ">APB_PROXY_STATUS_OK</a>, APB proxy will guarantee to send the data out. If the result is <a class="el" href="group__apb__proxy__enum.html#ggae7f44c25eb64b7837c5b7877c3e42a3da3b43aa5a826001dd74086302bd979008" title="The error occurred in APB proxy. ">APB_PROXY_STATUS_ERROR</a>, the cause would be: connection is not valid, data mode is not active, or message queue is full. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Feb 20 2019 14:28:20 for MT2625 API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
